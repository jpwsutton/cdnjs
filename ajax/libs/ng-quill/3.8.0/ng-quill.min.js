!function(e,t){"function"==typeof define&&define.amd?define(["quill"],t):"undefined"!=typeof module&&"object"==typeof exports?module.exports=t(require("quill")):e.Requester=t(e.Quill)}(this,function(m){"use strict";var e;return(e=angular.module("ngQuill",[])).provider("ngQuillConfig",function(){var t={modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},theme:"snow",placeholder:"Insert text here ...",readOnly:!1,bounds:document.body};this.set=function(e){(e=e||{}).modules&&(t.modules=e.modules),e.theme&&(t.theme=e.theme),null!==e.placeholder&&void 0!==e.placeholder&&(t.placeholder=e.placeholder.trim()),e.bounds&&(t.bounds=e.bounds),e.readOnly&&(t.readOnly=e.readOnly),e.formats&&(t.formats=e.formats)},this.$get=function(){return t}}),e.component("ngQuillEditor",{bindings:{modules:"<modules",theme:"@?",readOnly:"<?",formats:"<?",placeholder:"@?",bounds:"<?",scrollingContainer:"<?",strict:"<?",onEditorCreated:"&?",onContentChanged:"&?",onSelectionChanged:"&?",ngModel:"<",maxLength:"<",minLength:"<",customOptions:"<?",format:"@?"},require:{ngModelCtrl:"ngModel"},transclude:{toolbar:"?ngQuillToolbar"},template:'<div class="ng-hide" ng-show="$ctrl.ready"><ng-transclude ng-transclude-slot="toolbar"></ng-transclude></div>',controller:["$scope","$element","$timeout","$transclude","ngQuillConfig",function(d,n,e,o,t){var i,a,l,s,h={},u="html",c=!1,g=!1,r=t.placeholder;this.validate=function(e){this.maxLength&&(e.length>this.maxLength+1?this.ngModelCtrl.$setValidity("maxlength",!1):this.ngModelCtrl.$setValidity("maxlength",!0)),1<this.minLength&&(e.length<=this.minLength&&1<e.length?this.ngModelCtrl.$setValidity("minlength",!1):this.ngModelCtrl.$setValidity("minlength",!0))},this.$onChanges=function(e){e.ngModel&&e.ngModel.currentValue!==e.ngModel.previousValue&&(i=e.ngModel.currentValue,a&&!g&&(c=!0,i?a.setContents(a.clipboard.convert(i)):a.setText("")),g=!1),a&&e.readOnly&&a.enable(!e.readOnly.currentValue)},this.$onInit=function(){null!==this.placeholder&&void 0!==this.placeholder&&(r=this.placeholder.trim()),this.format&&-1<["object","html","text"].indexOf(this.format)&&(u=this.format),h={theme:this.theme||t.theme,readOnly:this.readOnly||t.readOnly,modules:this.modules||t.modules,formats:this.formats||t.formats,placeholder:r,bounds:this.bounds||t.bounds,strict:this.strict,scrollingContainer:this.scrollingContainer}},this.$postLink=function(){e(function(){this._initEditor(void 0)}.bind(this),0)},this.$onDestroy=function(){a=null,l&&l.removeListener("text-change"),s&&s.removeListener("selection-change")},this._initEditor=function(r){var e=angular.element("<div></div>"),t=n.children();r=e[0],"self"===h.bounds&&(h.bounds=r),o.isSlotFilled("toolbar")&&(h.modules.toolbar=t.find("ng-quill-toolbar").children()[0]),t.append(e),this.customOptions&&this.customOptions.forEach(function(e){var t=m.import(e.import);t.whitelist=e.whitelist,e.toRegister&&(t[e.toRegister.key]=e.toRegister.value),m.register(t,!0)}),a=new m(r,h),this.ready=!0,s=a.on("selection-change",function(e,t,n){this.onSelectionChanged&&this.onSelectionChanged({editor:a,oldRange:t,range:e,source:n}),e||d.$applyAsync(function(){this.ngModelCtrl.$setTouched()}.bind(this))}.bind(this)),l=a.on("text-change",function(e,t,n){var o=r.children[0].innerHTML,i=a.getText(),l=a.getContents(),s=["<"+a.root.firstChild.localName+">","</"+a.root.firstChild.localName+">"];o===s[0]+"<br>"+s[1]&&(o=null),this.validate(i),c||d.$applyAsync(function(){g=!0,"text"===u?this.ngModelCtrl.$setViewValue(i):"object"===u?this.ngModelCtrl.$setViewValue(l):this.ngModelCtrl.$setViewValue(o),this.onContentChanged&&this.onContentChanged({editor:a,html:o,text:i,content:l,delta:e,oldDelta:t,source:n})}.bind(this)),c=!1}.bind(this)),i&&(c=!0,"text"===u?a.setText(i,"silent"):"object"===u?a.setContents(i,"silent"):a.setContents(a.clipboard.convert(i,"silent")),a.history.clear()),this.onEditorCreated&&this.onEditorCreated({editor:a})}}]}),e.name});