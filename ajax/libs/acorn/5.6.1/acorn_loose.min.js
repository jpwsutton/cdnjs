!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("./acorn")):"function"==typeof define&&define.amd?define(["exports","./acorn"],e):e((t.acorn=t.acorn||{},t.acorn.loose={}),t.acorn)}(this,function(t,k){"use strict";function i(){}var r={},s=function(t,e){if(void 0===e&&(e={}),this.toks=k.tokenizer(t,e),this.options=this.toks.options,this.input=this.toks.input,this.tok=this.last={type:k.tokTypes.eof,start:0,end:0},this.tok.validateRegExpFlags=i,this.tok.validateRegExpPattern=i,this.options.locations){var s=this.toks.curPosition();this.tok.loc=new k.SourceLocation(this.toks,s,s)}this.ahead=[],this.context=[],this.curIndent=0,this.curLineStart=0,this.nextLineStart=this.lineEnd(this.curLineStart)+1,this.inAsync=!1,this.inFunction=!1,this.options.pluginsLoose=e.pluginsLoose||{},this.loadPlugins(this.options.pluginsLoose)};s.prototype.startNode=function(){return new k.Node(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)},s.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start},s.prototype.startNodeAt=function(t){return this.options.locations?new k.Node(this.toks,t[0],t[1]):new k.Node(this.toks,t)},s.prototype.finishNode=function(t,e){return t.type=e,t.end=this.last.end,this.options.locations&&(t.loc.end=this.last.loc.end),this.options.ranges&&(t.range[1]=this.last.end),t},s.prototype.dummyNode=function(t){var e=this.startNode();return e.type=t,e.end=e.start,this.options.locations&&(e.loc.end=e.loc.start),this.options.ranges&&(e.range[1]=e.start),this.last={type:k.tokTypes.name,start:e.start,end:e.start,loc:e.loc},e},s.prototype.dummyIdent=function(){var t=this.dummyNode("Identifier");return t.name="✖",t},s.prototype.dummyString=function(){var t=this.dummyNode("Literal");return t.value=t.raw="✖",t},s.prototype.eat=function(t){return this.tok.type===t&&(this.next(),!0)},s.prototype.isContextual=function(t){return this.tok.type===k.tokTypes.name&&this.tok.value===t},s.prototype.eatContextual=function(t){return this.tok.value===t&&this.eat(k.tokTypes.name)},s.prototype.canInsertSemicolon=function(){return this.tok.type===k.tokTypes.eof||this.tok.type===k.tokTypes.braceR||k.lineBreak.test(this.input.slice(this.last.end,this.tok.start))},s.prototype.semicolon=function(){return this.eat(k.tokTypes.semi)},s.prototype.expect=function(t){if(this.eat(t))return!0;for(var e=1;e<=2;e++)if(this.lookAhead(e).type==t){for(var s=0;s<e;s++)this.next();return!0}},s.prototype.pushCx=function(){this.context.push(this.curIndent)},s.prototype.popCx=function(){this.curIndent=this.context.pop()},s.prototype.lineEnd=function(t){for(;t<this.input.length&&!k.isNewLine(this.input.charCodeAt(t));)++t;return t},s.prototype.indentationAfter=function(t){for(var e=0;;++t){var s=this.input.charCodeAt(t);if(32===s)++e;else{if(9!==s)return e;e+=this.options.tabSize}}},s.prototype.closes=function(t,e,s,i){return this.tok.type===t||this.tok.type===k.tokTypes.eof||s!=this.curLineStart&&this.curIndent<e&&this.tokenStartsLine()&&(!i||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<e)},s.prototype.tokenStartsLine=function(){for(var t=this.tok.start-1;t>=this.curLineStart;--t){var e=this.input.charCodeAt(t);if(9!==e&&32!==e)return!1}return!0},s.prototype.extend=function(t,e){this[t]=e(this[t])},s.prototype.loadPlugins=function(t){for(var e in t){var s=r[e];if(!s)throw new Error("Plugin '"+e+"' not found");s(this,t[e])}},s.prototype.parse=function(){return this.next(),this.parseTopLevel()};var e=s.prototype;function f(t){return"✖"==t.name}e.next=function(){var t=this;if(this.last=this.tok,this.ahead.length?this.tok=this.ahead.shift():this.tok=this.readToken(),this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)t.curLineStart=t.nextLineStart,t.nextLineStart=t.lineEnd(t.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}},e.readToken=function(){for(var e,s=this;;)try{return s.toks.next(),s.toks.type===k.tokTypes.dot&&"."===s.input.substr(s.toks.end,1)&&6<=s.options.ecmaVersion&&(s.toks.end++,s.toks.type=k.tokTypes.ellipsis),new k.Token(s.toks)}catch(t){if(!(t instanceof SyntaxError))throw t;var i=t.message,r=t.raisedAt,o=!0;if(/unterminated/i.test(i))if(r=s.lineEnd(t.pos+1),/string/.test(i))o={start:t.pos,end:r,type:k.tokTypes.string,value:s.input.slice(t.pos+1,r)};else if(/regular expr/i.test(i)){var n=s.input.slice(t.pos,r);try{n=new RegExp(n)}catch(t){}o={start:t.pos,end:r,type:k.tokTypes.regexp,value:n}}else o=!!/template/.test(i)&&{start:t.pos,end:r,type:k.tokTypes.template,value:s.input.slice(t.pos,r)};else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(i))for(;r<this.input.length&&!((e=this.input.charCodeAt(r))<14&&8<e||32===e||160===e||k.isNewLine(e));)++r;else if(/character escape|expected hexadecimal/i.test(i))for(;r<this.input.length;){var a=s.input.charCodeAt(r++);if(34===a||39===a||k.isNewLine(a))break}else if(/unexpected character/i.test(i))r++,o=!1;else{if(!/regular expression/i.test(i))throw t;o=!0}if(s.resetTo(r),!0===o&&(o={start:r,end:r,type:k.tokTypes.name,value:"✖"}),o)return s.options.locations&&(o.loc=new k.SourceLocation(s.toks,k.getLineInfo(s.input,o.start),k.getLineInfo(s.input,o.end))),o}},e.resetTo=function(t){this.toks.pos=t;var e,s=this.input.charAt(t-1);if(this.toks.exprAllowed=!s||/[[{(,;:?/*=+\-~!|&%^<>]/.test(s)||/[enwfd]/.test(s)&&/\b(case|else|return|throw|new|in|(instance|type)?of|delete|void)$/.test(this.input.slice(t-10,t)),this.options.locations)for(this.toks.curLine=1,this.toks.lineStart=k.lineBreakG.lastIndex=0;(e=k.lineBreakG.exec(this.input))&&e.index<t;)++this.toks.curLine,this.toks.lineStart=e.index+e[0].length},e.lookAhead=function(t){for(;t>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[t-1]};var o=s.prototype;o.parseTopLevel=function(){var t=this.startNodeAt(this.options.locations?[0,k.getLineInfo(this.input,0)]:0);for(t.body=[];this.tok.type!==k.tokTypes.eof;)t.body.push(this.parseStatement());return this.toks.adaptDirectivePrologue(t.body),this.last=this.tok,6<=this.options.ecmaVersion&&(t.sourceType=this.options.sourceType),this.finishNode(t,"Program")},o.parseStatement=function(){var t,e=this,s=this.tok.type,i=this.startNode();switch(this.toks.isLet()&&(s=k.tokTypes._var,t="let"),s){case k.tokTypes._break:case k.tokTypes._continue:this.next();var r=s===k.tokTypes._break;return this.semicolon()||this.canInsertSemicolon()?i.label=null:(i.label=this.tok.type===k.tokTypes.name?this.parseIdent():null,this.semicolon()),this.finishNode(i,r?"BreakStatement":"ContinueStatement");case k.tokTypes._debugger:return this.next(),this.semicolon(),this.finishNode(i,"DebuggerStatement");case k.tokTypes._do:return this.next(),i.body=this.parseStatement(),i.test=this.eat(k.tokTypes._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(i,"DoWhileStatement");case k.tokTypes._for:this.next();var o=9<=this.options.ecmaVersion&&this.inAsync&&this.eatContextual("await");if(this.pushCx(),this.expect(k.tokTypes.parenL),this.tok.type===k.tokTypes.semi)return this.parseFor(i,null);var n=this.toks.isLet();if(n||this.tok.type===k.tokTypes._var||this.tok.type===k.tokTypes._const){var a=this.parseVar(!0,n?"let":this.tok.value);return 1!==a.declarations.length||this.tok.type!==k.tokTypes._in&&!this.isContextual("of")?this.parseFor(i,a):(9<=this.options.ecmaVersion&&this.tok.type!==k.tokTypes._in&&(i.await=o),this.parseForIn(i,a))}var p=this.parseExpression(!0);return this.tok.type===k.tokTypes._in||this.isContextual("of")?(9<=this.options.ecmaVersion&&this.tok.type!==k.tokTypes._in&&(i.await=o),this.parseForIn(i,this.toAssignable(p))):this.parseFor(i,p);case k.tokTypes._function:return this.next(),this.parseFunction(i,!0);case k.tokTypes._if:return this.next(),i.test=this.parseParenExpression(),i.consequent=this.parseStatement(),i.alternate=this.eat(k.tokTypes._else)?this.parseStatement():null,this.finishNode(i,"IfStatement");case k.tokTypes._return:return this.next(),this.eat(k.tokTypes.semi)||this.canInsertSemicolon()?i.argument=null:(i.argument=this.parseExpression(),this.semicolon()),this.finishNode(i,"ReturnStatement");case k.tokTypes._switch:var h,c=this.curIndent,u=this.curLineStart;for(this.next(),i.discriminant=this.parseParenExpression(),i.cases=[],this.pushCx(),this.expect(k.tokTypes.braceL);!this.closes(k.tokTypes.braceR,c,u,!0);)if(e.tok.type===k.tokTypes._case||e.tok.type===k.tokTypes._default){var y=e.tok.type===k.tokTypes._case;h&&e.finishNode(h,"SwitchCase"),i.cases.push(h=e.startNode()),h.consequent=[],e.next(),h.test=y?e.parseExpression():null,e.expect(k.tokTypes.colon)}else h||(i.cases.push(h=e.startNode()),h.consequent=[],h.test=null),h.consequent.push(e.parseStatement());return h&&this.finishNode(h,"SwitchCase"),this.popCx(),this.eat(k.tokTypes.braceR),this.finishNode(i,"SwitchStatement");case k.tokTypes._throw:return this.next(),i.argument=this.parseExpression(),this.semicolon(),this.finishNode(i,"ThrowStatement");case k.tokTypes._try:if(this.next(),i.block=this.parseBlock(),i.handler=null,this.tok.type===k.tokTypes._catch){var l=this.startNode();this.next(),this.eat(k.tokTypes.parenL)?(l.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(k.tokTypes.parenR)):l.param=null,l.body=this.parseBlock(),i.handler=this.finishNode(l,"CatchClause")}return i.finalizer=this.eat(k.tokTypes._finally)?this.parseBlock():null,i.handler||i.finalizer?this.finishNode(i,"TryStatement"):i.block;case k.tokTypes._var:case k.tokTypes._const:return this.parseVar(!1,t||this.tok.value);case k.tokTypes._while:return this.next(),i.test=this.parseParenExpression(),i.body=this.parseStatement(),this.finishNode(i,"WhileStatement");case k.tokTypes._with:return this.next(),i.object=this.parseParenExpression(),i.body=this.parseStatement(),this.finishNode(i,"WithStatement");case k.tokTypes.braceL:return this.parseBlock();case k.tokTypes.semi:return this.next(),this.finishNode(i,"EmptyStatement");case k.tokTypes._class:return this.parseClass(!0);case k.tokTypes._import:return this.parseImport();case k.tokTypes._export:return this.parseExport();default:if(this.toks.isAsyncFunction())return this.next(),this.next(),this.parseFunction(i,!0,!0);var d=this.parseExpression();return f(d)?(this.next(),this.tok.type===k.tokTypes.eof?this.finishNode(i,"EmptyStatement"):this.parseStatement()):s===k.tokTypes.name&&"Identifier"===d.type&&this.eat(k.tokTypes.colon)?(i.body=this.parseStatement(),i.label=d,this.finishNode(i,"LabeledStatement")):(i.expression=d,this.semicolon(),this.finishNode(i,"ExpressionStatement"))}},o.parseBlock=function(){var t=this.startNode();this.pushCx(),this.expect(k.tokTypes.braceL);var e=this.curIndent,s=this.curLineStart;for(t.body=[];!this.closes(k.tokTypes.braceR,e,s,!0);)t.body.push(this.parseStatement());return this.popCx(),this.eat(k.tokTypes.braceR),this.finishNode(t,"BlockStatement")},o.parseFor=function(t,e){return t.init=e,t.test=t.update=null,this.eat(k.tokTypes.semi)&&this.tok.type!==k.tokTypes.semi&&(t.test=this.parseExpression()),this.eat(k.tokTypes.semi)&&this.tok.type!==k.tokTypes.parenR&&(t.update=this.parseExpression()),this.popCx(),this.expect(k.tokTypes.parenR),t.body=this.parseStatement(),this.finishNode(t,"ForStatement")},o.parseForIn=function(t,e){var s=this.tok.type===k.tokTypes._in?"ForInStatement":"ForOfStatement";return this.next(),t.left=e,t.right=this.parseExpression(),this.popCx(),this.expect(k.tokTypes.parenR),t.body=this.parseStatement(),this.finishNode(t,s)},o.parseVar=function(t,e){var s=this,i=this.startNode();i.kind=e,this.next(),i.declarations=[];do{var r=s.startNode();r.id=6<=s.options.ecmaVersion?s.toAssignable(s.parseExprAtom(),!0):s.parseIdent(),r.init=s.eat(k.tokTypes.eq)?s.parseMaybeAssign(t):null,i.declarations.push(s.finishNode(r,"VariableDeclarator"))}while(this.eat(k.tokTypes.comma));if(!i.declarations.length){var o=this.startNode();o.id=this.dummyIdent(),i.declarations.push(this.finishNode(o,"VariableDeclarator"))}return t||this.semicolon(),this.finishNode(i,"VariableDeclaration")},o.parseClass=function(t){var e=this,s=this.startNode();this.next(),this.tok.type===k.tokTypes.name?s.id=this.parseIdent():s.id=!0===t?this.dummyIdent():null,s.superClass=this.eat(k.tokTypes._extends)?this.parseExpression():null,s.body=this.startNode(),s.body.body=[],this.pushCx();var i=this.curIndent+1,r=this.curLineStart;for(this.eat(k.tokTypes.braceL),this.curIndent+1<i&&(i=this.curIndent,r=this.curLineStart);!this.closes(k.tokTypes.braceR,i,r);)if(!e.semicolon()){var o=e.startNode(),n=void 0,a=void 0;6<=e.options.ecmaVersion&&(o.static=!1,n=e.eat(k.tokTypes.star)),e.parsePropertyName(o),f(o.key)?(f(e.parseMaybeAssign())&&e.next(),e.eat(k.tokTypes.comma)):("Identifier"!==o.key.type||o.computed||"static"!==o.key.name||e.tok.type==k.tokTypes.parenL||e.tok.type==k.tokTypes.braceL?o.static=!1:(o.static=!0,n=e.eat(k.tokTypes.star),e.parsePropertyName(o)),o.computed||"Identifier"!==o.key.type||"async"!==o.key.name||e.tok.type===k.tokTypes.parenL||e.canInsertSemicolon()?a=!1:(a=!0,n=9<=e.options.ecmaVersion&&e.eat(k.tokTypes.star),e.parsePropertyName(o)),5<=e.options.ecmaVersion&&"Identifier"===o.key.type&&!o.computed&&("get"===o.key.name||"set"===o.key.name)&&e.tok.type!==k.tokTypes.parenL&&e.tok.type!==k.tokTypes.braceL?(o.kind=o.key.name,e.parsePropertyName(o),o.value=e.parseMethod(!1)):(o.computed||o.static||n||a||!("Identifier"===o.key.type&&"constructor"===o.key.name||"Literal"===o.key.type&&"constructor"===o.key.value)?o.kind="method":o.kind="constructor",o.value=e.parseMethod(n,a)),s.body.body.push(e.finishNode(o,"MethodDefinition")))}return this.popCx(),this.eat(k.tokTypes.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),this.semicolon(),this.finishNode(s.body,"ClassBody"),this.finishNode(s,t?"ClassDeclaration":"ClassExpression")},o.parseFunction=function(t,e,s){var i=this.inAsync,r=this.inFunction;return this.initFunction(t),6<=this.options.ecmaVersion&&(t.generator=this.eat(k.tokTypes.star)),8<=this.options.ecmaVersion&&(t.async=!!s),this.tok.type===k.tokTypes.name?t.id=this.parseIdent():!0===e&&(t.id=this.dummyIdent()),this.inAsync=t.async,this.inFunction=!0,t.params=this.parseFunctionParams(),t.body=this.parseBlock(),this.toks.adaptDirectivePrologue(t.body.body),this.inAsync=i,this.inFunction=r,this.finishNode(t,e?"FunctionDeclaration":"FunctionExpression")},o.parseExport=function(){var t=this.startNode();if(this.next(),this.eat(k.tokTypes.star))return t.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(k.tokTypes._default)){var e;if(this.tok.type===k.tokTypes._function||(e=this.toks.isAsyncFunction())){var s=this.startNode();this.next(),e&&this.next(),t.declaration=this.parseFunction(s,"nullableID",e)}else this.tok.type===k.tokTypes._class?t.declaration=this.parseClass("nullableID"):(t.declaration=this.parseMaybeAssign(),this.semicolon());return this.finishNode(t,"ExportDefaultDeclaration")}return this.tok.type.keyword||this.toks.isLet()||this.toks.isAsyncFunction()?(t.declaration=this.parseStatement(),t.specifiers=[],t.source=null):(t.declaration=null,t.specifiers=this.parseExportSpecifierList(),t.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon()),this.finishNode(t,"ExportNamedDeclaration")},o.parseImport=function(){var t,e=this.startNode();(this.next(),this.tok.type===k.tokTypes.string)?(e.specifiers=[],e.source=this.parseExprAtom()):(this.tok.type===k.tokTypes.name&&"from"!==this.tok.value&&((t=this.startNode()).local=this.parseIdent(),this.finishNode(t,"ImportDefaultSpecifier"),this.eat(k.tokTypes.comma)),e.specifiers=this.parseImportSpecifierList(),e.source=this.eatContextual("from")&&this.tok.type==k.tokTypes.string?this.parseExprAtom():this.dummyString(),t&&e.specifiers.unshift(t));return this.semicolon(),this.finishNode(e,"ImportDeclaration")},o.parseImportSpecifierList=function(){var t=this,e=[];if(this.tok.type===k.tokTypes.star){var s=this.startNode();this.next(),s.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent(),e.push(this.finishNode(s,"ImportNamespaceSpecifier"))}else{var i=this.curIndent,r=this.curLineStart,o=this.nextLineStart;for(this.pushCx(),this.eat(k.tokTypes.braceL),this.curLineStart>o&&(o=this.curLineStart);!this.closes(k.tokTypes.braceR,i+(this.curLineStart<=o?1:0),r);){var n=t.startNode();if(t.eat(k.tokTypes.star))n.local=t.eatContextual("as")?t.parseIdent():t.dummyIdent(),t.finishNode(n,"ImportNamespaceSpecifier");else{if(t.isContextual("from"))break;if(n.imported=t.parseIdent(),f(n.imported))break;n.local=t.eatContextual("as")?t.parseIdent():n.imported,t.finishNode(n,"ImportSpecifier")}e.push(n),t.eat(k.tokTypes.comma)}this.eat(k.tokTypes.braceR),this.popCx()}return e},o.parseExportSpecifierList=function(){var t=this,e=[],s=this.curIndent,i=this.curLineStart,r=this.nextLineStart;for(this.pushCx(),this.eat(k.tokTypes.braceL),this.curLineStart>r&&(r=this.curLineStart);!this.closes(k.tokTypes.braceR,s+(this.curLineStart<=r?1:0),i)&&!t.isContextual("from");){var o=t.startNode();if(o.local=t.parseIdent(),f(o.local))break;o.exported=t.eatContextual("as")?t.parseIdent():o.local,t.finishNode(o,"ExportSpecifier"),e.push(o),t.eat(k.tokTypes.comma)}return this.eat(k.tokTypes.braceR),this.popCx(),e};var n=s.prototype;function a(t,e){return new s(t,e).parse()}n.checkLVal=function(t){if(!t)return t;switch(t.type){case"Identifier":case"MemberExpression":return t;case"ParenthesizedExpression":return t.expression=this.checkLVal(t.expression),t;default:return this.dummyIdent()}},n.parseExpression=function(t){var e=this.storeCurrentPos(),s=this.parseMaybeAssign(t);if(this.tok.type===k.tokTypes.comma){var i=this.startNodeAt(e);for(i.expressions=[s];this.eat(k.tokTypes.comma);)i.expressions.push(this.parseMaybeAssign(t));return this.finishNode(i,"SequenceExpression")}return s},n.parseParenExpression=function(){this.pushCx(),this.expect(k.tokTypes.parenL);var t=this.parseExpression();return this.popCx(),this.expect(k.tokTypes.parenR),t},n.parseMaybeAssign=function(t){if(this.toks.isContextual("yield")){var e=this.startNode();return this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!=k.tokTypes.star&&!this.tok.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(k.tokTypes.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression")}var s=this.storeCurrentPos(),i=this.parseMaybeConditional(t);if(this.tok.type.isAssign){var r=this.startNodeAt(s);return r.operator=this.tok.value,r.left=this.tok.type===k.tokTypes.eq?this.toAssignable(i):this.checkLVal(i),this.next(),r.right=this.parseMaybeAssign(t),this.finishNode(r,"AssignmentExpression")}return i},n.parseMaybeConditional=function(t){var e=this.storeCurrentPos(),s=this.parseExprOps(t);if(this.eat(k.tokTypes.question)){var i=this.startNodeAt(e);return i.test=s,i.consequent=this.parseMaybeAssign(),i.alternate=this.expect(k.tokTypes.colon)?this.parseMaybeAssign(t):this.dummyIdent(),this.finishNode(i,"ConditionalExpression")}return s},n.parseExprOps=function(t){var e=this.storeCurrentPos(),s=this.curIndent,i=this.curLineStart;return this.parseExprOp(this.parseMaybeUnary(!1),e,-1,t,s,i)},n.parseExprOp=function(t,e,s,i,r,o){if(this.curLineStart!=o&&this.curIndent<r&&this.tokenStartsLine())return t;var n=this.tok.type.binop;if(null!=n&&(!i||this.tok.type!==k.tokTypes._in)&&s<n){var a=this.startNodeAt(e);if(a.left=t,a.operator=this.tok.value,this.next(),this.curLineStart!=o&&this.curIndent<r&&this.tokenStartsLine())a.right=this.dummyIdent();else{var p=this.storeCurrentPos();a.right=this.parseExprOp(this.parseMaybeUnary(!1),p,n,i,r,o)}return this.finishNode(a,/&&|\|\|/.test(a.operator)?"LogicalExpression":"BinaryExpression"),this.parseExprOp(a,e,s,i,r,o)}return t},n.parseMaybeUnary=function(t){var e,s=this,i=this.storeCurrentPos();if(8<=this.options.ecmaVersion&&this.toks.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))e=this.parseAwait(),t=!0;else if(this.tok.type.prefix){var r=this.startNode(),o=this.tok.type===k.tokTypes.incDec;o||(t=!0),r.operator=this.tok.value,r.prefix=!0,this.next(),r.argument=this.parseMaybeUnary(!0),o&&(r.argument=this.checkLVal(r.argument)),e=this.finishNode(r,o?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===k.tokTypes.ellipsis){var n=this.startNode();this.next(),n.argument=this.parseMaybeUnary(t),e=this.finishNode(n,"SpreadElement")}else for(e=this.parseExprSubscripts();this.tok.type.postfix&&!this.canInsertSemicolon();){var a=s.startNodeAt(i);a.operator=s.tok.value,a.prefix=!1,a.argument=s.checkLVal(e),s.next(),e=s.finishNode(a,"UpdateExpression")}if(!t&&this.eat(k.tokTypes.starstar)){var p=this.startNodeAt(i);return p.operator="**",p.left=e,p.right=this.parseMaybeUnary(!1),this.finishNode(p,"BinaryExpression")}return e},n.parseExprSubscripts=function(){var t=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),t,!1,this.curIndent,this.curLineStart)},n.parseSubscripts=function(t,e,s,i,r){for(var o=this;;){if(o.curLineStart!=r&&o.curIndent<=i&&o.tokenStartsLine()){if(o.tok.type!=k.tokTypes.dot||o.curIndent!=i)return t;--i}var n="Identifier"===t.type&&"async"===t.name&&!o.canInsertSemicolon();if(o.eat(k.tokTypes.dot)){var a=o.startNodeAt(e);a.object=t,o.curLineStart!=r&&o.curIndent<=i&&o.tokenStartsLine()?a.property=o.dummyIdent():a.property=o.parsePropertyAccessor()||o.dummyIdent(),a.computed=!1,t=o.finishNode(a,"MemberExpression")}else if(o.tok.type==k.tokTypes.bracketL){o.pushCx(),o.next();var p=o.startNodeAt(e);p.object=t,p.property=o.parseExpression(),p.computed=!0,o.popCx(),o.expect(k.tokTypes.bracketR),t=o.finishNode(p,"MemberExpression")}else if(s||o.tok.type!=k.tokTypes.parenL){if(o.tok.type!=k.tokTypes.backQuote)return t;var h=o.startNodeAt(e);h.tag=t,h.quasi=o.parseTemplate(),t=o.finishNode(h,"TaggedTemplateExpression")}else{var c=o.parseExprList(k.tokTypes.parenR);if(n&&o.eat(k.tokTypes.arrow))return o.parseArrowExpression(o.startNodeAt(e),c,!0);var u=o.startNodeAt(e);u.callee=t,u.arguments=c,t=o.finishNode(u,"CallExpression")}}},n.parseExprAtom=function(){var t;switch(this.tok.type){case k.tokTypes._this:case k.tokTypes._super:var e=this.tok.type===k.tokTypes._this?"ThisExpression":"Super";return t=this.startNode(),this.next(),this.finishNode(t,e);case k.tokTypes.name:var s=this.storeCurrentPos(),i=this.parseIdent(),r=!1;if("async"===i.name&&!this.canInsertSemicolon()){if(this.eat(k.tokTypes._function))return this.parseFunction(this.startNodeAt(s),!1,!0);this.tok.type===k.tokTypes.name&&(i=this.parseIdent(),r=!0)}return this.eat(k.tokTypes.arrow)?this.parseArrowExpression(this.startNodeAt(s),[i],r):i;case k.tokTypes.regexp:t=this.startNode();var o=this.tok.value;return t.regex={pattern:o.pattern,flags:o.flags},t.value=o.value,t.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(t,"Literal");case k.tokTypes.num:case k.tokTypes.string:return(t=this.startNode()).value=this.tok.value,t.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(t,"Literal");case k.tokTypes._null:case k.tokTypes._true:case k.tokTypes._false:return(t=this.startNode()).value=this.tok.type===k.tokTypes._null?null:this.tok.type===k.tokTypes._true,t.raw=this.tok.type.keyword,this.next(),this.finishNode(t,"Literal");case k.tokTypes.parenL:var n=this.storeCurrentPos();this.next();var a=this.parseExpression();if(this.expect(k.tokTypes.parenR),this.eat(k.tokTypes.arrow)){var p=a.expressions||[a];return p.length&&f(p[p.length-1])&&p.pop(),this.parseArrowExpression(this.startNodeAt(n),p)}if(this.options.preserveParens){var h=this.startNodeAt(n);h.expression=a,a=this.finishNode(h,"ParenthesizedExpression")}return a;case k.tokTypes.bracketL:return(t=this.startNode()).elements=this.parseExprList(k.tokTypes.bracketR,!0),this.finishNode(t,"ArrayExpression");case k.tokTypes.braceL:return this.parseObj();case k.tokTypes._class:return this.parseClass(!1);case k.tokTypes._function:return t=this.startNode(),this.next(),this.parseFunction(t,!1);case k.tokTypes._new:return this.parseNew();case k.tokTypes.backQuote:return this.parseTemplate();default:return this.dummyIdent()}},n.parseNew=function(){var t=this.startNode(),e=this.curIndent,s=this.curLineStart,i=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(k.tokTypes.dot))return t.meta=i,t.property=this.parseIdent(!0),this.finishNode(t,"MetaProperty");var r=this.storeCurrentPos();return t.callee=this.parseSubscripts(this.parseExprAtom(),r,!0,e,s),this.tok.type==k.tokTypes.parenL?t.arguments=this.parseExprList(k.tokTypes.parenR):t.arguments=[],this.finishNode(t,"NewExpression")},n.parseTemplateElement=function(){var t=this.startNode();return this.tok.type===k.tokTypes.invalidTemplate?t.value={raw:this.tok.value,cooked:null}:t.value={raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,"\n"),cooked:this.tok.value},this.next(),t.tail=this.tok.type===k.tokTypes.backQuote,this.finishNode(t,"TemplateElement")},n.parseTemplate=function(){var t=this,e=this.startNode();this.next(),e.expressions=[];var s=this.parseTemplateElement();for(e.quasis=[s];!s.tail;)t.next(),e.expressions.push(t.parseExpression()),t.expect(k.tokTypes.braceR)?s=t.parseTemplateElement():((s=t.startNode()).value={cooked:"",raw:""},s.tail=!0,t.finishNode(s,"TemplateElement")),e.quasis.push(s);return this.expect(k.tokTypes.backQuote),this.finishNode(e,"TemplateLiteral")},n.parseObj=function(){var t=this,e=this.startNode();e.properties=[],this.pushCx();var s=this.curIndent+1,i=this.curLineStart;for(this.eat(k.tokTypes.braceL),this.curIndent+1<s&&(s=this.curIndent,i=this.curLineStart);!this.closes(k.tokTypes.braceR,s,i);){var r=t.startNode(),o=void 0,n=void 0,a=void 0;if(9<=t.options.ecmaVersion&&t.eat(k.tokTypes.ellipsis))r.argument=t.parseMaybeAssign(),e.properties.push(t.finishNode(r,"SpreadElement")),t.eat(k.tokTypes.comma);else if(6<=t.options.ecmaVersion&&(a=t.storeCurrentPos(),r.method=!1,r.shorthand=!1,o=t.eat(k.tokTypes.star)),t.parsePropertyName(r),t.toks.isAsyncProp(r)?(n=!0,o=9<=t.options.ecmaVersion&&t.eat(k.tokTypes.star),t.parsePropertyName(r)):n=!1,f(r.key))f(t.parseMaybeAssign())&&t.next(),t.eat(k.tokTypes.comma);else{if(t.eat(k.tokTypes.colon))r.kind="init",r.value=t.parseMaybeAssign();else if(6<=t.options.ecmaVersion&&(t.tok.type===k.tokTypes.parenL||t.tok.type===k.tokTypes.braceL))r.kind="init",r.method=!0,r.value=t.parseMethod(o,n);else if(5<=t.options.ecmaVersion&&"Identifier"===r.key.type&&!r.computed&&("get"===r.key.name||"set"===r.key.name)&&t.tok.type!=k.tokTypes.comma&&t.tok.type!=k.tokTypes.braceR&&t.tok.type!=k.tokTypes.eq)r.kind=r.key.name,t.parsePropertyName(r),r.value=t.parseMethod(!1);else{if(r.kind="init",6<=t.options.ecmaVersion)if(t.eat(k.tokTypes.eq)){var p=t.startNodeAt(a);p.operator="=",p.left=r.key,p.right=t.parseMaybeAssign(),r.value=t.finishNode(p,"AssignmentExpression")}else r.value=r.key;else r.value=t.dummyIdent();r.shorthand=!0}e.properties.push(t.finishNode(r,"Property")),t.eat(k.tokTypes.comma)}}return this.popCx(),this.eat(k.tokTypes.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),this.finishNode(e,"ObjectExpression")},n.parsePropertyName=function(t){if(6<=this.options.ecmaVersion){if(this.eat(k.tokTypes.bracketL))return t.computed=!0,t.key=this.parseExpression(),void this.expect(k.tokTypes.bracketR);t.computed=!1}var e=this.tok.type===k.tokTypes.num||this.tok.type===k.tokTypes.string?this.parseExprAtom():this.parseIdent();t.key=e||this.dummyIdent()},n.parsePropertyAccessor=function(){if(this.tok.type===k.tokTypes.name||this.tok.type.keyword)return this.parseIdent()},n.parseIdent=function(){var t=this.tok.type===k.tokTypes.name?this.tok.value:this.tok.type.keyword;if(!t)return this.dummyIdent();var e=this.startNode();return this.next(),e.name=t,this.finishNode(e,"Identifier")},n.initFunction=function(t){t.id=null,t.params=[],6<=this.options.ecmaVersion&&(t.generator=!1,t.expression=!1),8<=this.options.ecmaVersion&&(t.async=!1)},n.toAssignable=function(t,e){if(!t||"Identifier"==t.type||"MemberExpression"==t.type&&!e);else if("ParenthesizedExpression"==t.type)this.toAssignable(t.expression,e);else{if(this.options.ecmaVersion<6)return this.dummyIdent();if("ObjectExpression"==t.type){t.type="ObjectPattern";for(var s=0,i=t.properties;s<i.length;s+=1){var r=i[s];this.toAssignable(r,e)}}else if("ArrayExpression"==t.type)t.type="ArrayPattern",this.toAssignableList(t.elements,e);else if("Property"==t.type)this.toAssignable(t.value,e);else if("SpreadElement"==t.type)t.type="RestElement",this.toAssignable(t.argument,e);else{if("AssignmentExpression"!=t.type)return this.dummyIdent();t.type="AssignmentPattern",delete t.operator}}return t},n.toAssignableList=function(t,e){for(var s=0,i=t;s<i.length;s+=1){var r=i[s];this.toAssignable(r,e)}return t},n.parseFunctionParams=function(t){return t=this.parseExprList(k.tokTypes.parenR),this.toAssignableList(t,!0)},n.parseMethod=function(t,e){var s=this.startNode(),i=this.inAsync,r=this.inFunction;return this.initFunction(s),6<=this.options.ecmaVersion&&(s.generator=!!t),8<=this.options.ecmaVersion&&(s.async=!!e),this.inAsync=s.async,this.inFunction=!0,s.params=this.parseFunctionParams(),s.body=this.parseBlock(),this.toks.adaptDirectivePrologue(s.body.body),this.inAsync=i,this.inFunction=r,this.finishNode(s,"FunctionExpression")},n.parseArrowExpression=function(t,e,s){var i=this.inAsync,r=this.inFunction;return this.initFunction(t),8<=this.options.ecmaVersion&&(t.async=!!s),this.inAsync=t.async,this.inFunction=!0,t.params=this.toAssignableList(e,!0),t.expression=this.tok.type!==k.tokTypes.braceL,t.expression?t.body=this.parseMaybeAssign():(t.body=this.parseBlock(),this.toks.adaptDirectivePrologue(t.body.body)),this.inAsync=i,this.inFunction=r,this.finishNode(t,"ArrowFunctionExpression")},n.parseExprList=function(t,e){var s=this;this.pushCx();var i=this.curIndent,r=this.curLineStart,o=[];for(this.next();!this.closes(t,i+1,r);)if(s.eat(k.tokTypes.comma))o.push(e?null:s.dummyIdent());else{var n=s.parseMaybeAssign();if(f(n)){if(s.closes(t,i,r))break;s.next()}else o.push(n);s.eat(k.tokTypes.comma)}return this.popCx(),this.eat(t)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),o},n.parseAwait=function(){var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(),this.finishNode(t,"AwaitExpression")},k.defaultOptions.tabSize=4,k.addLooseExports(a,s,r),t.parse_dammit=a,t.LooseParser=s,t.pluginsLoose=r,Object.defineProperty(t,"__esModule",{value:!0})});